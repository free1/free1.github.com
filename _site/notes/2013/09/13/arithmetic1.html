<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
    <meta name="author" content="Free" />
    <meta name="generator" content="Jekyll 1.0.2" />
    <meta name="description" content="算法" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    
    <link rel="stylesheet" type="text/css" href="/css/post.css" media="all" />

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

    <script type="text/javascript" src="/js/compatible.js"></script>

</head>
	<body>
		<div id="Previous">
			<a href="http://free1.github.com/"> <-Home </a>
		</div>

		<div id="Title">
	    	<h1>Arithmetic1</h1>
	    	<p><b>13 Sep 2013</b>, by <b>Free</b></p>
		</div>

		<div id="Post">
	    	<article id="articlePost">
	        	<h2>给定一个双向链表,即给定一个节点 i,i 的可访问属性有:i.data, i.prev, i.next。其 中 prev 为上一个节点的指向,next 为下一个节点的指向。现要求实现一个操作, 只改变 next,prev 的指向,使链表的第 1 个与第 2 个元素交换,使链表的第 3 个 与第 4 个元素交换,使链表的第 5 个与第 6 个元素交换 ...例如:链表 [1, 2, 3, 4, 5, 6, 7]进行变换后得到的新链表可表示为[2, 1, 4, 3, 6, 5, 7]。也即是当链表元素个数是奇数个的时候,链表最后一个元素不进行改变。</h2>
<div class="highlight"><pre><code class="text language-text" data-lang="text">#include &lt;stdio.h&gt; 
#include &lt;stdlib.h&gt; 

// 定义节点
typedef struct Node
{
    int data; 
    struct Node *next; 
    struct Node *prev; 
}NODE, *PNODE; 

// 创建链表
PNODE create_list(void)
{
    int len, i, val;
    PNODE pTail;
    // 创建头节点并分配内存 
    PNODE pHead = (PNODE)malloc(sizeof(NODE)); 
    // 内存分配失败
    if(pHead == NULL)
    {
        printf(&quot;内存分配失败！&quot;);
        exit(-1);
    }
    // 将头节点当成尾节点
    pTail = pHead;
    pTail-&gt;next = NULL;
    // 输入链表长度
    printf(&quot;输入链表长度:\n&quot;);
    scanf(&quot;%d&quot;,&amp;len);

    for(i = 0; i &lt; len; i++)
    {
        // 输入节点的值
        printf(&quot;输入第%d个节点的值\n&quot;, i+1);
        scanf(&quot;%d&quot;,&amp;val);

        // 给新节点分配内存
        PNODE pNew = (PNODE)malloc(sizeof(NODE));
        // 内存分配失败
        if(pNew == NULL)
        {
            printf(&quot;内存分配失败！&quot;);
            exit(-1);
        }
        // 将输入的值赋给新节点
        pNew-&gt;data = val;
        // 将新节点插入到链表尾部
        pTail-&gt;next = pNew;
        pNew-&gt;prev = pTail;
        pNew-&gt;next = NULL;
        // 将新节点作为尾节点
        pTail = pNew;
    }
    return pHead;
}

// 打印链表
void traverse_list(PNODE pHead)
{
    PNODE p;
    p = pHead-&gt;next;
    // 链表为空
    if(p == NULL) 
    { 
        printf(&quot;链表为空！\n&quot;); 
    } 
    // 遍历链表
    while(p != NULL)
    {
        // 打印链表中的值
        printf(&quot;%d &quot;, p-&gt;data);
        // 下一个链表
        p = p-&gt;next;    
    }

    return;
}

// 链表操作
PNODE change_list(PNODE pHead)
{
    PNODE p, q, i;
    p = pHead-&gt;next;
    i = pHead-&gt;next;

    // 只有一个元素
    if(p-&gt;next == NULL)
    {
        return pHead;
    }

    // 有两个元素
    if(p-&gt;next-&gt;next == NULL)
    {
        p-&gt;prev-&gt;next = p-&gt;next;  // 第一个指向第三个
        p-&gt;next-&gt;prev = p-&gt;prev;  // 第三个指向第一个
        p-&gt;next-&gt;next = p;        // 第三个指向第二个
        p-&gt;prev = p-&gt;next;        // 第二个指向第三个
        p-&gt;next-&gt;next-&gt;prev = p;  // 第四个指向第二个
        p-&gt;next = NULL;        // 第二个指向第四个

        return pHead;
    }

    while(p &amp;&amp; p-&gt;next)
    {
        p-&gt;prev-&gt;next = p-&gt;next;  // 第一个指向第三个
        p-&gt;next-&gt;prev = p-&gt;prev;  // 第三个指向第一个
        // 记录标记指针
        q = p-&gt;next-&gt;next;
        // i = p-&gt;next-&gt;next;
        p-&gt;next-&gt;next = p;        // 第三个指向第二个
        p-&gt;prev = p-&gt;next;        // 第二个指向第三个
        p-&gt;next-&gt;next-&gt;prev = p;  // 第四个指向第二个
        p-&gt;next = q;              // 第二个指向第四个

        p = p-&gt;next;
    }
    return pHead;
}

// 主函数
int main(int argc, char* argv[]) 
{
    // 初始化头节点
    PNODE pHead = NULL;
    // 创建链表
    pHead = create_list();
    // 遍历输出旧链表
    printf(&quot;原链表的值:\n&quot;);
    traverse_list(pHead); 
    // 链表操作
    change_list(pHead);
    // 遍历输出新链表
    printf(&quot;\n转换后链表的值:\n&quot;);
    traverse_list(pHead); 
}
</code></pre></div>
	    	</article>

	    	
				<div style="height: 64px"></div>
    		
		</div>
		
	</body>
</html>


 
   
       