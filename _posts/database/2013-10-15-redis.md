---
layout: post
title: redis基础
category: database
description: redis
disqus: false
---

## 简单安装
* 安装gcc:  `sudo apt-get install gcc`
* 下载:  `wget http://download.redis.io/releases/redis-3.2.3.tar.gz`
* 解压:  `tar xzf redis-3.2.3.tar.gz`
* 编译:  `cd redis-3.2.3  make`
* 将启动脚本放入init.d:  `sudo cp utils/redis_init_script /etc/init.d/redis`
* 配置文件:  `直接运行utils/install_server.sh 或 cp /redis/redis.conf /etc/redis/6379.conf等`
* service启动:  `service redis start`
* 检查是否启动:  `ps aux | grep redis`


## 基本命令
* 进入cli:  `redis-cli`
* redis对键的命命: 对象类型:对象id:对象属性


## 字符串(String)常用命令
* set 设置键值:  `set key value`
* get 获取键值:  `get key`
* incr(incrby, incrbyfloat) 自增1(n):  `incr key (n)`
* decr(decrby) 自减1(n):  `desc key (n)`
* append 在末尾追加值:  `append key value`
* getrange(substr) 获取子串:  `getrange key start end`
* setrange 修改子串:  `setrange key start end value`
* getbit 获取位移二进制值:  `getbit key offset`


## 列表(List)常用命令 
* rpush(lpush) 将一个[多个]值加入列表右(左)端:  `rpush(lpush) key value [value ...]`
* rpop(lpop) 移除并返回列表最右(左)端元素:  `rpop(lpop) key`
* lindex 返回偏移量offset元素:  `lindex key offset`
* lrange 返回一段元素(包含左右端):  `lrange key start end`
* ltrim 保留偏移量offset元素:  `ltrim key start end`
* blpop(阻塞) 从第一个非空列表中弹出最左端元素, 或在timeout秒之内阻塞并等待可弹出的元素出现:  `blpop key [key ...] timeout`
* rpoplpush(brpoplpush阻塞) 弹出key1中最右端元素放入key2最左端,返回这个元素(等待可弹出元素):  `rpoplpush key2 key2`


## 集合(Set)常用命令
* sadd(srem) 添加(移除)一个[多个]元素,返回原来元素数量:  `sadd(rem) key value [value ...]`
* sismember 检查key是否在集合中:  `sismember key value`
* scard 返回元素数量:  `scard key`
* smembers 返回所有元素:  `smembers key`
* srandmember 随机返回一个[多个]元素(count负数时可能会重复):  `srandmember key [count]`
* spop 随机移除一个元素,返回移除元素:  `spop key`
* smove 将key1中元素移入key2,成功返回1,失败返回0:  `smove key1 key2 value`
* sdiff(sdiffstore) 返回key1存在key2不存在的元素(存入key2):  `sdiff key2 key1 [key1 ...]`
* sinter(sinterstore) 返回key2key2相同元素(存入key2):  `sinter(sinterstore) key2 key1 [key1 ...]`
* sunion(sunionstore) 返回至少一个集合存在的元素(存入key2):  `sunion(sunionstore) key2 key1 [key1 ...]`


# 散列(Hash)常用命令
* hmget 获取一个[多个]值:  `hmget key keyname [keyname ...]`
* hmset 设置键值:  `hmset key keyname keyvalue [keyname keyvalue ...]`
* hdel 删除键值,返回成功删除数量:  `hdel key keyname [keyname ...]`
* hlen 返回键值对数量:  `hlen key`
* hexists 键是否存在:  `hexists key keyname`
* hkeys 所有键:  `hkeys key`
* hvals 所有值:  `hvals key`
* hgetall 所有键值对:  `hgetall key`
* hincrby(hincrbyfloat) 将键keyname保存的值加上整数int(浮点数float):  `hincrby key keyname int(float)`


## 有序集合(Sorted Set)常用命令
* 



